use devdb;
show triggers;

INSERT INTO `employee` VALUES ('0805a50c-826c-4d09-8cc4-5f9970d613eb','EMP-7',NULL,'2019-10-12 14:45:37',NULL,_binary '\0',NULL,'2019-10-12 14:45:38',NULL,'',7,'huangyingshi@gmail.com',NULL,'Yingshi','Huang','','','','$argon2id$v=19$m=131072,t=6,p=1$ys6UHXG9ELkOdVn+6zb4AQ$m2hSWSPAnCIHyk56fIJBiFzq+HygGtU3gmfFoWX4yWo','S-a5ee6570-f0f9-4955-aac1-15c9c5a9d498','yingshi2502','448357c8-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','44485af2-ecff-11e9-ab88-00155d03b61a'),('11347a67-a69f-4fd7-b88e-fcc1978e9649','EMP-1',NULL,'2019-10-12 14:44:34',NULL,_binary '\0',NULL,'2019-10-12 14:44:34',NULL,'',1,'lonelytown98@gmail.com',NULL,'Test User05','Test Last05','test middle05','','','$argon2id$v=19$m=131072,t=6,p=1$PPxeH95eSFvzNFBtSeOEtw$/Kfp3K5H4VOLIREc0dRdCdJoqAQTJ7oJ2i1mnYcq50E','S-9e5a1ae4-26d2-456a-a8f3-3b3b184b4b31','user05','44800fcd-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','4444cd3c-ecff-11e9-ab88-00155d03b61a'),('27fb9c20-eb6d-41c4-a46f-c30964423303','EMP-2',NULL,'2019-10-12 14:44:42',NULL,_binary '\0',NULL,'2019-10-12 14:44:43',NULL,'',2,'lonelytown98@gmail.com',NULL,'Test User04','Test Last04','test middle04','','','$argon2id$v=19$m=131072,t=6,p=1$+rgj6wBLBkZMIMUCekImMQ$+5XTpPhca9B54I2Dhee9p0yR3Mh3nABR2a7rUe09am8','S-a99f1182-92e6-4ed6-a382-f8383e23760b','user04','44800fcd-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','4444cd3c-ecff-11e9-ab88-00155d03b61a'),('300b00bc-8929-42b2-93e1-7056f4bc1e3f','EMP-4',NULL,'2019-10-12 14:44:58',NULL,_binary '\0',NULL,'2019-10-12 14:44:58',NULL,'',4,'lonelytown98@gmail.com',NULL,'Test User02','Test Last02','test middle02','','','$argon2id$v=19$m=131072,t=6,p=1$qFZY2AE+Y9E5U/+wdMwU7g$TrYcgLf4XfLb5ei0NcPG2GhBdRrw5yV2FWXLcl5T3IQ','S-948e8dc2-ed6b-4036-a852-1f0d3ff26fcd','user02','44800fcd-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','4444cd3c-ecff-11e9-ab88-00155d03b61a'),('59ebab88-8e27-4d8a-ab24-956e63154914','EMP-6',NULL,'2019-10-12 14:45:30',NULL,_binary '\0',NULL,'2019-10-12 14:45:30',NULL,'',6,'huangyingshi@gmail.com',NULL,'F','L','','','','$argon2id$v=19$m=131072,t=6,p=1$BTc3gpnWNcMrspxnIzuPog$fe5UhaPFUFaTp1lj01SYeYKwGvwCMG4AF8tKd4wh0QA','S-b0b6612f-1a5b-4847-baf3-48c15d15f654','admin','448357c8-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','44485af2-ecff-11e9-ab88-00155d03b61a'),('76691585-e405-4c1d-89fe-30ae9bf156d4','EMP-3',NULL,'2019-10-12 14:44:49',NULL,_binary '\0',NULL,'2019-10-12 14:44:49',NULL,'',3,'lonelytown98@gmail.com',NULL,'Test User03','Test Last03','test middle03','','','$argon2id$v=19$m=131072,t=6,p=1$16P2RUbKcLn5S9fLofySeQ$67Q+DKJip0Bo60/ZJ4P0S44Blqw5qgH7hOUWS7bJ024','S-f9650764-47cb-4d23-b63a-1d6b8e495856','user03','44800fcd-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','4444cd3c-ecff-11e9-ab88-00155d03b61a'),('9d5aba9e-850f-4992-96f4-dd33d21b9915','EMP-10',NULL,'2019-10-12 14:46:35',NULL,_binary '\0',NULL,'2019-10-12 14:46:35',NULL,'',10,'huangyingshi@gmail.com',NULL,'','','','','','$argon2id$v=19$m=131072,t=6,p=1$q4GAZgxBvt663wYb7c3rlA$ic0MUOx4rII9uQbCiymsrYWlqwkASIDha8ZiPv9fwwM','S-a6411f1f-d8b5-47ec-8d12-a4009927dc77','normal','448357c8-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','44485af2-ecff-11e9-ab88-00155d03b61a'),('b2ed7252-7075-47f7-92e9-eb0bd9a06d4c','EMP-9',NULL,'2019-10-12 14:45:58',NULL,_binary '\0',NULL,'2019-10-12 14:45:58',NULL,'',9,'huangyingshi@gmail.com',NULL,'','','','','','$argon2id$v=19$m=131072,t=6,p=1$xdYJ+0sk/bLL6yf2nRbrvw$GXHsxBKWWGRfZXwfB14egifmbGO1rFKCVIPPlqhjW7o','S-9289af9a-422f-4a6e-a8fa-ca71e9754dad','test','448357c8-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','44485af2-ecff-11e9-ab88-00155d03b61a'),('caf3bd11-328b-4ae9-9cbc-9c3bfdccfbb6','EMP-8',NULL,'2019-10-12 14:45:46',NULL,_binary '\0',NULL,'2019-10-12 14:45:46',NULL,'',8,'huangyingshi@gmail.com',NULL,'Hong','Xu','','','','$argon2id$v=19$m=131072,t=6,p=1$Ry9CdgBUzJ+qJNKHp9ERnw$L6+QZLhWnmieg8oG7W4te12zNicQJgZpOcAeLiS4/k4','S-85836111-2b3d-460a-a64d-032d32afcf9f','xuhong','448357c8-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','44485af2-ecff-11e9-ab88-00155d03b61a'),('fdb48703-9de6-4bdb-9b1b-6099cf848481','EMP-5',NULL,'2019-10-12 14:45:07',NULL,_binary '\0',NULL,'2019-10-12 14:45:07',NULL,'',5,'lonelytown98@gmail.com',NULL,'Test User01','Test Last01','test middle01','','','$argon2id$v=19$m=131072,t=6,p=1$kC9wkNaVygvSzqljF8vkGw$4Tc8V6JmXHK2bXQXTv58UY5k7tn/di8DBVRxVLLTHLg','S-9137ae08-83ac-4dec-bffd-f7752be44009','user01','44800fcd-ecff-11e9-ab88-00155d03b61a','59ebab88-8e27-4d8a-ab24-956e63154914','4444cd3c-ecff-11e9-ab88-00155d03b61a');

select * from employee;
select * from region;
INSERT INTO region (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`) 
VALUES (UUID(), 'APAC', 'admin', NOW(), 'APAC', 0, 'Asia Pacific', 'GRANT,all_users');

INSERT INTO region (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`) 
VALUES (UUID(), 'UK', 'admin', NOW(), 'UK', 0, 'United Kingdom', 'GRANT,all_users');

INSERT INTO region (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`) 
VALUES (UUID(), 'EU', 'admin', NOW(), 'EU', 0, 'Europe', 'GRANT,all_users');

-- currency
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'SGD', 'admin', NOW(), 0, 'Singapore Dollars', 'GRANT,all_users', 'SG');
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'INR', 'admin', NOW(), 0, 'Indian Rupee', 'GRANT,all_users', 'IN');
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'GBP', 'admin', NOW(), 0, 'Pound sterling', 'GRANT,all_users', 'IN');
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'EUR', 'admin', NOW(), 0, 'Euro', 'GRANT,all_users', '');
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'HKD', 'admin', NOW(), 0, 'Hong Kong Dollars', 'GRANT,all_users', 'HK');
INSERT INTO currency (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `country_code`) 
VALUES (UUID(), 'JPY', 'admin', NOW(), 0, 'Japan Yen', 'GRANT,all_users', 'JP');

select curr.code,curr.object_name,c.object_name,c.currency_code from currency curr right join country c on curr.code = c.currency_code;
select * from currency;
-- country

SET @APACID = (SELECT r.id from region r where r.code LIKE '%APAC%');
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'SG', 'admin', NOW(), 'APAC-SG', 0, 'Singapore', 'GRANT,all_users', 'SGD',@APACID);
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'HK', 'admin', NOW(), 'APAC-HK', 0, 'Hong Kong', 'GRANT,all_users', 'HKD',@APACID);
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'JP', 'admin', NOW(), 'APAC-JP', 0, 'Japan', 'GRANT,all_users', 'JPY',@APACID);
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'IN', 'admin', NOW(), 'APAC-IN', 0, 'India', 'GRANT,all_users', 'IDR',@APACID);

SET @UKRegionID = (SELECT r.id from region r where r.code LIKE '%UK%');
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'UK', 'admin', NOW(), 'UK-UK', 0, 'United Kingdom', 'GRANT,all_users', 'GBP',@UKRegionID);

SET @EUID = (SELECT r.id from region r where r.code LIKE '%EU%');
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'DE', 'admin', NOW(), 'EU-DE', 0, 'Germany', 'GRANT,all_users', 'EUR',@EUID);
INSERT INTO country (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `currency_code`,`region_id`) 
VALUES (UUID(), 'FR', 'admin', NOW(), 'EU-FR', 0, 'France', 'GRANT,all_users', 'EUR',@EUID);

select c.object_name,r.object_name from country c join region r on c.region_id=r.id;
select * from country;

-- function
-- function name: TECH/HR etc, which can be shared among countries
-- function code: always unique

SET @SGID = (SELECT c.id from country c where c.code='SG');
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-TECH', 'admin', NOW(), 'APAC-SG-TECH', 0, 'TECH', 'GRANT,all_users', 
'', @SGID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-HR', 'admin', NOW(), 'APAC-SG-HR', 0, 'TECH', 'GRANT,all_users', 
'', @SGID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-TR', 'admin', NOW(), 'APAC-SG-TR', 0, 'TRADING', 'GRANT,all_users', 
'', @SGID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-SALES', 'admin', NOW(), 'APAC-SG-SALES', 0, 'SALES', 'GRANT,all_users', 
'', @SGID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-FIN', 'admin', NOW(), 'APAC-SG-FIN', 0, 'FINANCE', 'GRANT,all_users', 
'', @SGID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'SG-OPS', 'admin', NOW(), 'APAC-SG-OPS', 0, 'OPERATIONS', 'GRANT,all_users', 
'', @SGID);

SET @HKID = (SELECT c.id from country c where c.code='HK');
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'HK-TECH', 'admin', NOW(), 'APAC-HK-TECH', 0, 'TECH', 'GRANT,all_users', 
'', @HKID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'HK-HR', 'admin', NOW(), 'APAC-HK-HR', 0, 'TECH', 'GRANT,all_users', 
'', @HKID);
INSERT INTO company_function (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`, `offices_code_of_function`, `country_id`) VALUES 
(UUID(), 'HK-FIN', 'admin', NOW(), 'APAC-HK-FIN', 0, 'FINANCE', 'GRANT,all_users', 
'', @HKID);
select f.code,f.object_name,f.hierachy_path,c.object_name from company_function f join country c on 
f.country_id = c.id group by f.object_name, c.object_name;

-- business unit;
SET @SGTECHID = (SELECT f.id from company_function f where f.hierachy_path LIKE '%SG-TECH%');
INSERT INTO business_unit (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `function_id`) VALUES 
(UUID(), 'BU-SG-INFRA-TECH', 'admin', NOW(), 'APAC-SG-TECH-INFRA', 0, 'Infrastructure Tech', 'GRANT,all_users', 
@SGTECHID);
INSERT INTO business_unit (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `function_id`) VALUES 
(UUID(), 'BU-SG-FI-TECH', 'admin', NOW(), 'APAC-SG-TECH-FI', 0, 'Fixed Income Tech', 'GRANT,all_users', 
@SGTECHID);
INSERT INTO business_unit (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `function_id`) VALUES 
(UUID(), 'BU-SG-CURR-TECH', 'admin', NOW(), 'APAC-SG-TECH-CURR', 0, 'Currency Tech', 'GRANT,all_users', 
@SGTECHID);

SET @SGHRID = (SELECT f.id from company_function f where f.hierachy_path LIKE '%SG-HR%');

INSERT INTO business_unit (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `function_id`) VALUES 
(UUID(), 'BU-SG-HIRE-HR', 'admin', NOW(), 'APAC-SG-HR-HIRE', 0, 'Hiring HR', 'GRANT,all_users', 
@SGHRID);
INSERT INTO business_unit (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `function_id`) VALUES 
(UUID(), 'BU-SG-LP-HR', 'admin', NOW(), 'APAC-SG-HR-LP', 0, 'Leave and Policy', 'GRANT,all_users', 
@SGHRID);
select bu.object_name,bu.code,bu.hierachy_path,f.object_name from business_unit bu join company_function f on bu.function_id = f.id;
select * from business_unit;

-- team
SET @SGinfraTECH = (SELECT bu.id from business_unit bu where bu.hierachy_path LIKE '%SG-TECH-INFRA%');
INSERT INTO team (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `business_unit_id`) VALUES 
(UUID(), 'T-INFRA-EUC-1', 'admin', NOW(), 'APAC-SG-TECH-INFRA-EUC', 0, 'Infra End User Computing', '', 
@SGinfraTECH);
INSERT INTO team (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `business_unit_id`) VALUES 
(UUID(), 'T-INFRA-DBADMIN-2', 'admin', NOW(), 'APAC-SG-TECH-INFRA-DBADMIN', 0, 'Infra Database Admin', '', 
@SGinfraTECH);
SET @SGfiTech = (SELECT bu.id from business_unit bu where bu.hierachy_path LIKE '%SG-TECH-FI%');

INSERT INTO team (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `business_unit_id`) VALUES 
(UUID(), 'T-FI-PROD-3', 'admin', NOW(), 'APAC-SG-TECH-FI-PROD', 0, 'Fixed Income Production Support', '', 
@SGfiTech);

INSERT INTO team (`id`, `code`, `created_by`, `created_date_time`, `hierachy_path`, `is_deleted`, `object_name`, `permission_map`,  `business_unit_id`) VALUES 
(UUID(), 'T-FI-DEV-4', 'admin', NOW(), 'APAC-SG-TECH-FI-DEV', 0, 'Fixed Income Development', '', 
@SGfiTech);
select t.code, t.object_name as team_name, t.hierachy_path, bu.object_name as bu_name from team t join business_unit bu on t.business_unit_id=bu.id;
select * from team;

-- generate cost center:
SET @bmapproverid= (SELECT id from employee where user_name='yingshi2502'); 
SET @funcapproverid= (SELECT id from employee where user_name='admin'); 
SET @totalTeamCnt = (SELECT COUNT(*) FROM team);



DROP PROCEDURE IF EXISTS generate_costcenter;
DELIMITER $$
CREATE PROCEDURE generate_costcenter(
	BMID VARCHAR(36),
    FUNCID VARCHAR(36),
    TEAMCNT INT
)
BEGIN
    
    DECLARE i INT;
	declare teamid VARCHAR(36);
    declare teamname VARCHAR(255);
	declare teamcode VARCHAR(255);
    declare teamHP VARCHAR(255);

    set i=0;
    WHILE i < TEAMCNT DO
        select id,object_name,code,hierachy_path from team LIMIT i,1 into teamid, teamname,teamcode,teamHP;
        INSERT INTO cost_center (`id`, `created_by`, `created_date_time`,`is_deleted`, `object_name`, `permission_map`, `bm_approver_id`, `ccmanager`, `function_approver_id`, `team_id`) VALUES 
        (UUID(),  'admin', NOW(), 0, CONCAT('CC ',teamname), '', BMID, BMID, FUNCID, teamid);
		UPDATE cost_center SET 
         code=concat('CC',seq_no) 
         where team_id=teamid;
		UPDATE cost_center SET
         hierachy_path=concat(teamHP,'-',code)
         where team_id=teamid;
 
        SET i = i + 1;
    END WHILE;
 
END$$
 
DELIMITER ;

call generate_costcenter(@bmapproverid,@funcapproverid,@totalTeamCnt);

select * from cost_center;

-- office

select * from company_function where code like '%HK%';
select * from business_unit where code like '%hk%';
INSERT INTO office (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `address_line1`, `address_line2`, `city`, `country_code`, `postal_code`, `business_units_code_in_office`, `functions_code_in_office`, `country_id`) VALUES 
(UUID(), 'LHT', 'admin', NOW(), 0, 'LHT Tower', '', '31 Queen\'s Road', 'Unit 702 Central Hong Kong', 'Hong Kong', 'HK', '000', '', 'HK-TECH,HK-HR,HK-FIN', @HKID);
INSERT INTO office (`id`, `code`, `created_by`, `created_date_time`, `is_deleted`, `object_name`, `permission_map`, `address_line1`, `address_line2`, `city`, `country_code`, `postal_code`, `business_units_code_in_office`, `functions_code_in_office`, `country_id`) VALUES 
(UUID(), 'ORQ', 'admin', NOW(), 0, 'One Raffles Quay', '', 'One Raffles Quay', '1 Raffles Place', 'Singapore', 'SG', '048616', 'BU-SG-INFRA-TECH,BU-SG-FI-TECH,BU-SG-CURR-TECH,BU-SG-HIRE-HR,BU-SG-LP-HR', 'SG-TECH,SG-HR,SG-TR,SG-SALES,SG-FIN,SG-OPS', @SGID);

select * from office;
set @ORQid = (select id from office where code='ORQ');


-- set yingshi2502 as team manager for all teams for convenience
update team set team_leader_id = (select id from employee where user_name = 'yingshi2502');
-- set all sg team to SG ORQ office
update team set office_id=(select id from office where code='ORQ') where hierachy_path like '%-SG-%';

-- add teammate:
select * from team;
select * from cost_center;
-- only use the fixed income teams;
set @findevid = (select id from team where code like '%FI-DEV%');
set @fiprodid = (select id from team where code like '%FI-P%');

update employee set 
	team_id=@findevid,
    costcenter_id=(select id from cost_center where team_id=@findevid)
     where seq_no > 5;
update employee set 
    team_id=@fiprodid, 
    costcenter_id=(select id from cost_center where team_id=@fiprodid)
where not (seq_no > 5);

set @managerid = (select id from employee where user_name='admin');
update employee set manager_id=@managerid;

select * from employee;

-- budget categories;
INSERT INTO `budget_category` VALUES 
('07b971c0-ee31-4b4a-a3b4-c4eb895c6920','CAT-MISCELLANEOUS-2','yingshi2502','2019-10-03 09:22:00','APAC-SG-MISCELLANEOUS',_binary '\0',NULL,'2019-10-03 09:22:01','Miscellaneous','GRANT,all_user',2,@SGID),
('2f34164e-e5d3-4f7b-a484-e7e083ce3063','CAT-OFFICE_SUPPLIES-5','yingshi2502','2019-10-04 14:11:18','APAC-HK-OFFICE_SUPPLIES',_binary '\0',NULL,'2019-10-04 14:11:19','Office Supplies','GRANT,all_user',5,@HKID),
('4212254d-3905-4344-bf44-73f9b224cbd2','CAT-TELECOM-3','yingshi2502','2019-10-03 09:22:11','APAC-SG-TELECOM',_binary '\0',NULL,'2019-10-03 09:22:11','Telecom','GRANT,all_user',3,@SGID),
('43b9dc9d-9985-452e-9993-6544b7bf9545','CAT-TELECOM-7','yingshi2502','2019-10-04 14:12:03','APAC-HK-TELECOM',_binary '\0',NULL,'2019-10-04 14:12:03','Telecom','GRANT,all_user',7,@HKID),
('7e093809-d025-476f-9642-d681ae59fe80','CAT-MISCELLANEOUS-6','yingshi2502','2019-10-04 14:11:59','APAC-HK-MISCELLANEOUS',_binary '\0',NULL,'2019-10-04 14:11:59','Miscellaneous','GRANT,all_user',6,@HKID),
('8ad38a94-402c-41b2-96be-a75822cc619e','CAT-IT_ASSET-8','yingshi2502','2019-10-04 14:12:08','APAC-HK-IT_ASSET',_binary '\0',NULL,'2019-10-04 14:12:08','IT Asset','GRANT,all_user',8,@HKID),
('9b39fd3d-8edc-4262-9bca-3907b713672d','CAT-UPDATE_CAT1-9','Viet','2019-10-05 06:15:40','APAC-SG-UPDATE_CAT1',_binary '','Viet','2019-10-05 06:16:14','update cat1','GRANT,all_user',9,@SGID),
('d168c0b6-f728-4093-8d93-fa667ddf601b','CAT-IT_ASSET-1','yingshi2502','2019-10-03 09:21:35','APAC-SG-IT_ASSET',_binary '\0',NULL,'2019-10-03 09:21:35','IT Asset','GRANT,all_user',1,@SGID),
('dc2512f4-dd4f-4368-87f0-8d931b4f291f','CAT-OFFICE_SUPPLIES-4','yingshi2502','2019-10-03 09:22:18','APAC-SG-OFFICE_SUPPLIES',_binary '\0',NULL,'2019-10-03 09:22:18','Office Supplies','GRANT,all_user',4,@SGID);
select * from budget_category;

INSERT INTO `budget_sub1` VALUES ('05344981-db18-4066-ae2b-98b9d69d93c9','CATS1-HK-TELECOM-VOICE-11','Viet','2019-10-05 04:12:20','APAC-HK-TELECOM-HK-TELECOM-VOICE',_binary '\0','Viet','2019-10-05 04:12:20','HK-Telecom-Voice','GRANT,all_user',11,'43b9dc9d-9985-452e-9993-6544b7bf9545'),('09c64b0b-3a89-47cb-acd4-4332c6f473f5','CATS1-PERONAL_DESKTOP-7','yingshi2502','2019-10-03 09:32:05','APAC-SG-IT_ASSET-PERONAL_DESKTOP',_binary '\0','yingshi2502','2019-10-03 09:32:05','Peronal Desktop','GRANT,all_user',7,'d168c0b6-f728-4093-8d93-fa667ddf601b'),('187d273e-8b8e-4d26-a78e-eda9c6c575d6','CATS1-TRAVEL-8','yingshi2502','2019-10-04 14:14:47','APAC-HK-MISCELLANEOUS-TRAVEL',_binary '\0','yingshi2502','2019-10-04 14:14:47','Travel','GRANT,all_user',8,'7e093809-d025-476f-9642-d681ae59fe80'),('3df5d8c1-8f53-49e7-9a7b-c3c953a06c64','CATS1-UPDATE_SUB1-13','Viet','2019-10-05 06:16:40','APAC-SG-TELECOM-UPDATE_SUB1',_binary '','Viet','2019-10-05 06:17:33','update sub1','GRANT,all_user',13,'4212254d-3905-4344-bf44-73f9b224cbd2'),('69d3e92d-19a7-466a-a115-c3b13d3e939f','CATS1-TRAINING-9','yingshi2502','2019-10-04 14:14:51','APAC-HK-MISCELLANEOUS-TRAINING',_binary '\0','yingshi2502','2019-10-04 14:14:51','Training','GRANT,all_user',9,'7e093809-d025-476f-9642-d681ae59fe80'),('6a38bf6a-9d26-4d59-8277-5c77cdc6a7b9','CATS1-TRAVEL-5','yingshi2502','2019-10-03 09:30:12','APAC-SG-MISCELLANEOUS-TRAVEL',_binary '\0','yingshi2502','2019-10-03 09:30:12','Travel','GRANT,all_user',5,'07b971c0-ee31-4b4a-a3b4-c4eb895c6920'),('6aceb5b1-8ec2-4e72-8a65-98ccba379a74','CATS1-SCREENING-3','yingshi2502','2019-10-03 09:27:18','APAC-SG-IT_ASSET-SCREENING',_binary '\0','yingshi2502','2019-10-03 09:27:18','Screening','GRANT,all_user',3,'d168c0b6-f728-4093-8d93-fa667ddf601b'),('7a5797e5-47df-4a6a-a8ea-e9b7d9af2381','CATS1-HK_TELECOM_-_DATA-10','Viet','2019-10-05 04:12:07','APAC-HK-TELECOM-HK_TELECOM_-_DATA',_binary '\0','Viet','2019-10-05 04:12:07','HK Telecom - Data','GRANT,all_user',10,'43b9dc9d-9985-452e-9993-6544b7bf9545'),('ae918773-80a8-4940-aaab-2ecaa88b87f1','CATS1-ACCESS_CONTROL-4','yingshi2502','2019-10-03 09:27:40','APAC-SG-IT_ASSET-ACCESS_CONTROL',_binary '\0','yingshi2502','2019-10-03 09:27:40','Access Control','GRANT,all_user',4,'d168c0b6-f728-4093-8d93-fa667ddf601b'),('b2973748-f706-4373-b330-67cfbc59f394','CATS1-CHAIR-12','Viet','2019-10-05 04:13:22','APAC-HK-OFFICE_SUPPLIES-CHAIR',_binary '\0','Viet','2019-10-05 04:13:22','Chair','GRANT,all_user',12,'2f34164e-e5d3-4f7b-a484-e7e083ce3063'),('bce7a2db-836c-4ec5-ace5-b71a6a5fae21','CATS1-DATA-1','yingshi2502','2019-10-03 09:24:57','APAC-SG-TELECOM-DATA',_binary '\0','yingshi2502','2019-10-03 09:24:57','Data','GRANT,all_user',1,'4212254d-3905-4344-bf44-73f9b224cbd2'),('ddd75fd1-9d70-4c14-8ce2-ebf29f7e9e84','CATS1-TRAINING-6','yingshi2502','2019-10-03 09:30:16','APAC-SG-MISCELLANEOUS-TRAINING',_binary '\0','yingshi2502','2019-10-03 09:30:16','Training','GRANT,all_user',6,'07b971c0-ee31-4b4a-a3b4-c4eb895c6920'),('ea469685-169c-496e-aed1-eede8f1ac5e2','CATS1-VOICE-2','yingshi2502','2019-10-03 09:25:02','APAC-SG-TELECOM-VOICE',_binary '\0','yingshi2502','2019-10-03 09:25:02','Voice','GRANT,all_user',2,'4212254d-3905-4344-bf44-73f9b224cbd2');
INSERT INTO `budget_sub2` VALUES ('0eb8ab4c-9090-45cb-873b-f5cebb874e6e','CATS2-PLANNED_TRIPS-9','yingshi2502','2019-10-03 09:30:39','APAC-SG-MISCELLANEOUS-TRAVEL-PLANNED_TRIPS',_binary '\0','yingshi2502','2019-10-03 09:30:39','Planned Trips','GRANT,all_user',9,'6a38bf6a-9d26-4d59-8277-5c77cdc6a7b9'),('247d1318-1be6-4865-aac1-06eb8093182d','CATS2-HEADSET-3','yingshi2502','2019-10-03 09:26:08','APAC-SG-TELECOM-VOICE-HEADSET',_binary '\0','yingshi2502','2019-10-03 09:26:08','Headset','GRANT,all_user',3,'ea469685-169c-496e-aed1-eede8f1ac5e2'),('40a5938a-5c4e-461f-944b-ae677fb98caa','CATS2-WINDOWS_PC-13','yingshi2502','2019-10-03 09:32:19','APAC-SG-IT_ASSET-PERONAL_DESKTOP-WINDOWS_PC',_binary '\0','yingshi2502','2019-10-03 09:32:19','Windows PC','GRANT,all_user',13,'09c64b0b-3a89-47cb-acd4-4332c6f473f5'),('4b4bdfdd-689c-46d9-99a3-05590596dc3b','CATS2-DESKTOP_MONITOR-15','yingshi2502','2019-10-03 09:40:09','APAC-SG-IT_ASSET-PERONAL_DESKTOP-DESKTOP_MONITOR',_binary '\0','yingshi2502','2019-10-03 09:40:10','Desktop Monitor','GRANT,all_user',15,'09c64b0b-3a89-47cb-acd4-4332c6f473f5'),('4d86c134-7181-4317-ac26-9e808c34d9bd','CATS2-MAC-14','yingshi2502','2019-10-03 09:32:29','APAC-SG-IT_ASSET-PERONAL_DESKTOP-MAC',_binary '\0','yingshi2502','2019-10-03 09:32:29','Mac','GRANT,all_user',14,'09c64b0b-3a89-47cb-acd4-4332c6f473f5'),('536f4b4b-8133-4a6c-86ba-9abba071fee8','CATS2-DATA_LINK-1','yingshi2502','2019-10-03 09:25:34','APAC-SG-TELECOM-DATA-DATA_LINK',_binary '\0','yingshi2502','2019-10-03 09:25:34','Data Link','GRANT,all_user',1,'bce7a2db-836c-4ec5-ace5-b71a6a5fae21'),('5b8753c3-6827-41f1-9b57-d7a0a58a6dc5','CATS2-AD-HOC_TRAVEL-10','yingshi2502','2019-10-03 09:30:46','APAC-SG-MISCELLANEOUS-TRAVEL-AD-HOC_TRAVEL',_binary '\0','yingshi2502','2019-10-03 09:30:46','Ad-hoc Travel','GRANT,all_user',10,'6a38bf6a-9d26-4d59-8277-5c77cdc6a7b9'),('758b89f5-d8bb-44aa-8b07-d593abc63595','CATS2-PLANNED_TRAINING-12','yingshi2502','2019-10-03 09:31:06','APAC-SG-MISCELLANEOUS-TRAINING-PLANNED_TRAINING',_binary '\0','yingshi2502','2019-10-03 09:31:06','Planned Training','GRANT,all_user',12,'ddd75fd1-9d70-4c14-8ce2-ebf29f7e9e84'),('84ba63ff-1a69-4f76-8c25-b32fe909d381','CATS2-DATA_WIRE-2','yingshi2502','2019-10-03 09:25:54','APAC-SG-TELECOM-DATA-DATA_WIRE',_binary '\0','yingshi2502','2019-10-03 09:25:54','Data Wire','GRANT,all_user',2,'bce7a2db-836c-4ec5-ace5-b71a6a5fae21'),('991c40d1-c60c-497f-b069-5c5715d40af4','CATS2-COMPUTER_CHAIR-18','Viet','2019-10-05 04:13:55','APAC-HK-OFFICE_SUPPLIES-CHAIR-COMPUTER_CHAIR',_binary '\0','Viet','2019-10-05 04:13:55','Computer Chair','GRANT,all_user',18,'b2973748-f706-4373-b330-67cfbc59f394'),('a6a738f7-923d-4228-8669-e51d1ed835a5','CATS2-HEADSET-16','Viet','2019-10-05 04:12:35','APAC-HK-TELECOM-HK-TELECOM-VOICE-HEADSET',_binary '\0','Viet','2019-10-05 04:12:35','Headset','GRANT,all_user',16,'05344981-db18-4066-ae2b-98b9d69d93c9'),('ae502fca-91e1-4f43-8caf-474c0182e6c3','CATS2-FINGER_RECOGNITION-8','yingshi2502','2019-10-03 09:29:46','APAC-SG-IT_ASSET-ACCESS_CONTROL-FINGER_RECOGNITION',_binary '\0','yingshi2502','2019-10-03 09:29:46','Finger Recognition','GRANT,all_user',8,'ae918773-80a8-4940-aaab-2ecaa88b87f1'),('b3c18021-243d-484e-a5c8-44921a98e747','CATS2-PHONE-4','yingshi2502','2019-10-03 09:26:43','APAC-SG-TELECOM-VOICE-PHONE',_binary '\0','yingshi2502','2019-10-03 09:26:43','Phone','GRANT,all_user',4,'ea469685-169c-496e-aed1-eede8f1ac5e2'),('bdcc8900-ce2a-4b78-9fb8-41002896dbe1','CATS2-AD-HOC_TRAINING-11','yingshi2502','2019-10-03 09:30:57','APAC-SG-MISCELLANEOUS-TRAINING-AD-HOC_TRAINING',_binary '\0','yingshi2502','2019-10-03 09:30:57','Ad-hoc Training','GRANT,all_user',11,'ddd75fd1-9d70-4c14-8ce2-ebf29f7e9e84'),('bf88e9d9-d51d-4094-a2fd-ca96611bbbb9','CATS2-CARD_READER-7','yingshi2502','2019-10-03 09:28:37','APAC-SG-IT_ASSET-ACCESS_CONTROL-CARD_READER',_binary '\0','yingshi2502','2019-10-03 09:28:37','Card Reader','GRANT,all_user',7,'ae918773-80a8-4940-aaab-2ecaa88b87f1'),('dfbd7a86-7894-4f68-b198-0b46cd57bcaf','CATS2-DATA_LINK-17','Viet','2019-10-05 04:13:11','APAC-HK-TELECOM-HK_TELECOM_-_DATA-DATA_LINK',_binary '\0','Viet','2019-10-05 04:13:11','Data Link','GRANT,all_user',17,'7a5797e5-47df-4a6a-a8ea-e9b7d9af2381'),('e0dd0538-d598-445a-b49a-223df9be6a10','CATS2-PROJECTOR-5','yingshi2502','2019-10-03 09:28:04','APAC-SG-IT_ASSET-SCREENING-PROJECTOR',_binary '\0','yingshi2502','2019-10-03 09:28:04','Projector','GRANT,all_user',5,'6aceb5b1-8ec2-4e72-8a65-98ccba379a74'),('e8b0f0e9-6a71-4b0e-8f73-71524d9e03f3','CATS2-KITCHEN_CHAIR-19','Viet','2019-10-05 04:14:12','APAC-HK-OFFICE_SUPPLIES-CHAIR-KITCHEN_CHAIR',_binary '\0','Viet','2019-10-05 04:14:12','Kitchen Chair','GRANT,all_user',19,'b2973748-f706-4373-b330-67cfbc59f394'),('eb8de338-ff2e-4f9e-bb40-e8a80d4ebdce','CATS2-REMOTE_DESKTOP-6','yingshi2502','2019-10-03 09:28:18','APAC-SG-IT_ASSET-SCREENING-REMOTE_DESKTOP',_binary '\0','yingshi2502','2019-10-03 09:28:19','Remote Desktop','GRANT,all_user',6,'6aceb5b1-8ec2-4e72-8a65-98ccba379a74'),('f4d1c1d2-0269-4f06-8e76-ed372d556bb0','CATS2-SUB2-20','Viet','2019-10-05 06:17:05','APAC-SG-TELECOM-UPDATE_SUB1-SUB2',_binary '','Viet','2019-10-05 06:17:20','sub2','GRANT,all_user',20,'3df5d8c1-8f53-49e7-9a7b-c3c953a06c64');
INSERT INTO `vendor` VALUES ('08ad83b4-5d10-481d-8704-03762f2c4a51','VENDOR-8-SAMSUNG','yingshi2502','2019-10-03 09:37:12',NULL,_binary '\0','yingshi2502','2019-10-03 09:37:13','Samsung','GRANT,all_user',8,'Samsung@gmail.com','Samsung Billing Name','EscalationStaff@gmail.com','External','Samsung@gmail.com','Samsung Manager','Headset, Desktop devices'),('0d330fed-9741-4182-bb46-c71ca38f53e3','VENDOR-4-STARHUB','yingshi2502','2019-10-03 09:34:38',NULL,_binary '\0','yingshi2502','2019-10-03 09:34:38','Starhub','GRANT,all_user',4,'StarhubBillStaff@gmail.com','Starhub Billing Name','EscalationStaff@gmail.com','External','StarhubManager1@gmail.com','Starhub Manager','Telecom service and Wireless'),('154aec3b-7eef-4f74-bc20-268605ccfd11','VENDOR-2-APPLE','yingshi2502','2019-10-03 09:34:01',NULL,_binary '\0','yingshi2502','2019-10-03 09:34:01','Apple','GRANT,all_user',2,'AppleBillStaff@gmail.com','Apple Billing Name','EscalationStaff@gmail.com','External','AppleManager1@gmail.com','Apple Manager','Mac PC'),('2aaa5be8-f9cd-4674-bb8f-b8c74eeda21a','VENDOR-9-NUS','yingshi2502','2019-10-04 17:10:34',NULL,_binary '\0','yingshi2502','2019-10-04 18:42:32','NUS','GRANT,all_user',9,'a@gmail.com','Huang','aaaa@gmail.com','full name','huangyingshi@gmail.com','Yingshi','Education Institution'),('2f9f20d3-715a-4905-92d8-8c33a97ff06b','VENDOR-7-SONY','yingshi2502','2019-10-03 09:37:01',NULL,_binary '\0','yingshi2502','2019-10-03 09:37:01','Sony','GRANT,all_user',7,'Sony@gmail.com','Sony Billing Name','EscalationStaff@gmail.com','External','Sony@gmail.com','Sony Manager','Headset, Desktop devices'),('4d48be7d-0847-44d6-b7ae-d2bed4c8a68c','VENDOR-10-NTU','yingshi2502','2019-10-04 18:43:46',NULL,_binary '\0','yingshi2502','2019-10-04 18:44:31','NTU','GRANT,all_user',10,'xuhong@gmail.com','Xu Hong','viet@gamil.com','Viet','huangyingshi@gmail.com','Huang Yingshi','Education Institution'),('65b6940e-0f98-4a63-934e-b512b537fd72','VENDOR-11-DUMMY','yingshi2502','2019-10-05 03:48:52',NULL,_binary '\0','yingshi2502','2019-10-05 03:48:52','Dummy','GRANT,all_user',11,'dummy@gmail.com','dummy Biling','dummy@gmail.com','dummy escalation','dummy@gmail.com','dummy RM','Dummy service'),('7a299ce2-0cd3-4c9c-975b-46fb132e5085','VENDOR-6-CISCO','yingshi2502','2019-10-03 09:36:36',NULL,_binary '\0','yingshi2502','2019-10-03 09:36:37','CISCO','GRANT,all_user',6,'CISCO@gmail.com','CISCO Billing Name','EscalationStaff@gmail.com','External','CISCO@gmail.com','CISCO Manager',' IT and networking'),('88554bc4-6eff-4466-8efc-64ffba3a2e17','VENDOR-5-CHALLENGER','yingshi2502','2019-10-03 09:35:08',NULL,_binary '\0','yingshi2502','2019-10-03 09:35:08','Challenger','GRANT,all_user',5,'ChallengerBillStaff@gmail.com','Challenger Billing Name','EscalationStaff@gmail.com','External','ChallengerManager1@gmail.com','Challenger Manager','Hardware provider Singapore'),('b81c911c-839a-477f-bc78-5f2566fa4492','VENDOR-1-DELL','yingshi2502','2019-10-03 09:33:14',NULL,_binary '\0','yingshi2502','2019-10-04 17:09:33','Dell','GRANT,all_user',1,'DellBillStaff@gmail.com','Dell Billing Name2','EscalationStaff@gmail.com','External','DellManager1@gmail.com','Del1 Manager','Windows PC and monitors'),('e88caeb9-d993-4ac9-9ca3-f19131c69a8f','VENDOR-3-SINGTEL','yingshi2502','2019-10-03 09:34:25',NULL,_binary '\0','yingshi2502','2019-10-03 09:34:26','Singtel','GRANT,all_user',3,'SingtelBillStaff@gmail.com','Singtel Billing Name','EscalationStaff@gmail.com','External','SingtelManager1@gmail.com','Singtel Manager','Telecom service and Wireless');

select * from vendor;


